
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Asset Allocation</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <style>
            ::-webkit-scrollbar { display: none; }
            html { -ms-overflow-style: none; scrollbar-width: none; }

            :root {
                --bg-color: #ffffff;
                --text-color: #37352f;
            }
            body {
                font-family: "Courier New", Courier, monospace;
                margin: 0;
                padding: 12px 20px 20px 20px;
                background-color: var(--bg-color);
                color: var(--text-color);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            .chart-container {
                position: relative;
                width: 90vw;
                max-width: 400px;
                height: auto;
                aspect-ratio: 1 / 1;
                margin-top: 10px;
            }
            h2 {
                margin-top: 0; 
                margin-bottom: 2px;
                font-size: 0.9em; 
                font-weight: bold; 
                width: 100%; 
                max-width: 600px; 
                text-align: left;
                padding-bottom: 8px;
            }
            .total-assets {
                margin-top: 20px;
                font-size: 0.85em;
                font-weight: bold;
                color: #37352f;
                font-family: "Courier New", Courier, monospace;
            }
        </style>
    </head>
    <body>
        <h2>My Assets</h2>
        <div class="total-assets" id="totalDisplay"></div>
        <div class="chart-container">
            <canvas id="assetChart"></canvas>
        </div>

        <script>
            // Register DataLabels Plugin
            Chart.register(ChartDataLabels);

            const rawData = [{"name": "\uccad\ub144\uc801\uae08", "amount": 4400000, "type": "\uc801\uae08"}, {"name": "\ube44\uc0c1\uae08", "amount": 0, "type": "\ube44\uc0c1\uae08"}, {"name": "\ubbf8\uad6d\uc8fc\uc2dd", "amount": 5000000, "type": "\ubbf8\uad6d\uc8fc\uc2dd"}, {"name": "\ucf54\uc778", "amount": 2000000, "type": "\ucf54\uc778"}, {"name": "\ud55c\uad6d\uc8fc\uc2dd", "amount": 3000000, "type": "\ud55c\uad6d\uc8fc\uc2dd"}, {"name": "\uc785\ucd9c\uae08", "amount": 1600000, "type": "\ud604\uae08"}, {"name": "\uc8fc\ud0dd\uccad\uc57d", "amount": 5400000, "type": "\uccad\uc57d"}];
            
            const labels = rawData.map(d => d.name);
            const data = rawData.map(d => d.amount);
            
            // Calculate Total
            const total = data.reduce((a, b) => a + b, 0);
            document.getElementById('totalDisplay').innerText = 'TOTAL: ₩' + total.toLocaleString();

            // Notion Colors
            const notionPalette = ["#9B9A97", "#E3E2E0", "#EEE0DA", "#FADEC9", "#FDECC8", "#DBEDDB", "#D3E5EF", "#E8DEEE", "#F5E0E9", "#FFE2DD"];
            
            // Assign colors cyclically
            const bgColors = rawData.map((_, i) => notionPalette[i % notionPalette.length]);

            const ctx = document.getElementById('assetChart').getContext('2d');
            const myChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: bgColors,
                        borderWidth: 1,
                        borderColor: '#ffffff',
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false,
                        },
                        tooltip: {
                            backgroundColor: '#37352f',
                            titleFont: { family: "'Courier New', Courier, monospace" },
                            bodyFont: { family: "'Courier New', Courier, monospace" },
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    let value = context.raw;
                                    let percentage = Math.round((value / total) * 100) + '%';
                                    label += '₩' + value.toLocaleString() + ' (' + percentage + ')';
                                    return label;
                                }
                            }
                        },
                        datalabels: {
                            color: '#37352f',
                            font: {
                                family: "'Courier New', Courier, monospace",
                                weight: 'bold',
                                size: 12
                            },
                            formatter: function(value, context) {
                                let percentage = Math.round((value / total) * 100);
                                if (percentage < 3) return null; // Hide labels for very small slices
                                return context.chart.data.labels[context.dataIndex] + '\n' + percentage + '%';
                            },
                            align: 'center',
                            anchor: 'center',
                            textAlign: 'center'
                        }
                    },
                    layout: {
                        padding: 0
                    }
                }
            });
        </script>
    </body>
    </html>
    