
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Interactive Trading Calendar</title>
        <style>
            ::-webkit-scrollbar { display: none; }
            html { -ms-overflow-style: none; scrollbar-width: none; }
            
            :root {
                --bg-color: #ffffff;
                --text-color: #37352f;
                --grid-border: #e0e0e0;
                --hover-bg: #f7f7f5;
                --today-bg: #f5f5f5;
                --today-text: #616161;
                --loss-color: #e03e3e;
                --profit-color: #2eaadc;
            }
            body {
                font-family: "Courier New", Courier, monospace;
                margin: 0;
                padding: 12px 20px 20px 20px;
                background-color: var(--bg-color);
                color: var(--text-color);
                display: flex;
                flex-direction: column;
                align-items: center;
                user-select: none; /* prevent selection when clicking buttons */
            }
            
            .header-container {
                display: flex;
                justify-content: flex-start; /* Align left */
                align-items: center;
                gap: 15px; /* Space between title and buttons */
                width: 100%;
                max-width: 600px;
                margin-bottom: 10px;
            }
            
            h1 {
                margin: 0;
                font-size: 0.9em; 
                font-weight: bold; 
                text-align: left; /* Keep month left aligned if preferred, or center */
            }
            
            .nav-btn {
                background: none;
                border: 1px solid transparent;
                cursor: pointer;
                font-family: "Courier New", Courier, monospace;
                font-size: 0.5em; /* Adjusted to 0.5em as requested */
                color: #999;
                padding: 0 1px; /* Tighter spacing */
                border-radius: 4px;
                transition: color 0.2s, background 0.2s;
            }
            .nav-btn:hover {
                color: #333;
                background: #f0f0f0;
            }
            
            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 8px;
                width: 100%;
                max-width: 600px;
                margin-bottom: 20px;
            }
            
            .day-header {
                text-align: center;
                font-size: 0.8em;
                color: #999;
                padding-bottom: 8px;
            }
            
            .day-cell {
                aspect-ratio: 1 / 1;
                border-radius: 8px;
                background: #fff;
                box-shadow: 0 0 0 1px var(--grid-border);
                position: relative;
                cursor: pointer;
                transition: background 0.2s;
                display: flex;
                flex-direction: column; /* Stack content separately */
                justify-content: space-between; /* Space out number and content */
                align-items: flex-start; /* Align left */
                padding: 4px;
                font-size: 0.85em;
                font-weight: bold;
                overflow: hidden;
            }
            
            .day-cell:hover {
                background: var(--hover-bg);
                z-index: 10;
            }
            
            .day-cell.empty {
                background: transparent;
                box-shadow: none;
                cursor: default;
            }
            
            .day-cell.today {
                background: var(--today-bg);
                color: var(--today-text);
                box-shadow: 0 0 0 1px var(--today-text);
            }

            .tooltip {
                visibility: hidden;
                background-color: #333;
                color: #fff;
                text-align: left;
                border-radius: 6px;
                padding: 8px 12px;
                position: absolute;
                z-index: 1000;
                bottom: 125%; 
                left: 50%;
                transform: translateX(-50%);
                width: max-content;
                max-width: 300px;
                opacity: 0;
                transition: opacity 0.3s;
                font-size: 0.8em;
                font-weight: normal;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                white-space: normal;
            }
            
            .tooltip::after {
                content: "";
                position: absolute;
                top: 100%;
                left: 50%;
                margin-left: -5px;
                border-width: 5px;
                border-style: solid;
                border-color: #333 transparent transparent transparent;
            }
            
            .day-cell:hover .tooltip {
                visibility: visible;
                opacity: 1;
            }
            
            .entry-item { margin-bottom: 4px; }
            .entry-item:last-child { margin-bottom: 0; }

            .has-entry .day-number {
                /* Removed border-bottom as we show content now */
                border-bottom: none; 
            }
            .day-number { 
                pointer-events: none; 
                width: 100%;
                text-align: right;
                font-size: 0.8em;
                margin-bottom: 2px;
            }
            
            .cell-content {
                display: flex;
                flex-direction: column;
                gap: 1px;
                width: 100%;
                overflow: hidden;
            }
            
            .pl-text {
                font-size: 0.7em;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .loss { color: var(--loss-color); }
            .profit { color: var(--profit-color); }

            .nav-container {
                display: flex;
                align-items: center;
                gap: 2px;
            }

            .summary-footer {
                width: 100%;
                max-width: 600px;
                border-top: 1px solid var(--grid-border);
                padding-top: 12px;
                display: flex;
                justify-content: space-between;
                font-size: 0.85em;
                color: #555;
            }
            .summary-item {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            .summary-label {
                font-size: 0.9em;
                color: #999;
            }
            .summary-value {
                font-weight: bold;
                font-size: 1.1em;
            }
        </style>
    </head>
    <body>
        <div class="header-container">
            <h1 id="monthLabel">Loading...</h1>
            <div class="nav-container">
                <button class="nav-btn" id="prevBtn">◀</button>
                <button class="nav-btn" id="nextBtn">▶</button>
            </div>
        </div>
        
        <div class="calendar-grid" id="calendarGrid">
            <!-- Headers and Days inserted by JS -->
        </div>

        <div class="summary-footer">
            <div class="summary-item">
                <div class="summary-label">Monthly Return</div>
                <div class="summary-value" id="monthReturn">-</div>
            </div>
            <div class="summary-item" style="text-align: right;">
                <div class="summary-label">Yearly Return</div>
                <div class="summary-value" id="yearReturn">-</div>
            </div>
        </div>

        <script>
            const eventData = {"2026-02-02": [{"id": "2f90d907031e809ebb97fc4a7c11589a", "title": "P&G \ub9e4\ub3c4", "emoji": "\ud83d\udcb0", "display": "\ud83d\udcb0 P&G \ub9e4\ub3c4 (+31,000)", "profit": 31000, "loss": 0}, {"id": "2fb0d907031e808d99f8e4ff14353f02", "title": "\ud050\ub85c\uc140 \ub9e4\uc218", "emoji": "\ud83d\udcb0", "display": "\ud83d\udcb0 \ud050\ub85c\uc140 \ub9e4\uc218", "profit": 0, "loss": 0}, {"id": "2fb0d907031e80ed8197ca953f96089e", "title": "\uc0bc\uc131 SDI \ub9e4\ub3c4", "emoji": "\ud83d\udcb0", "display": "\ud83d\udcb0 \uc0bc\uc131 SDI \ub9e4\ub3c4", "profit": 0, "loss": -10761}], "2026-02-03": [{"id": "2fb0d907031e80bfa573da996cd52a86", "title": "\uc0bc\uc131\uc804\uc790 \ub9e4\ub3c4", "emoji": "\ud83d\udcb0", "display": "\ud83d\udcb0 \uc0bc\uc131\uc804\uc790 \ub9e4\ub3c4 (+4,688)", "profit": 4688, "loss": 0}, {"id": "2fb0d907031e80deb9dbeebefb417d8f", "title": "\uc54c\ud30c\ubcb3 A", "emoji": "\ud83d\udcb0", "display": "\ud83d\udcb0 \uc54c\ud30c\ubcb3 A (+14,710)", "profit": 14710, "loss": 0}]};
            let currentDate = new Date(); // Defaults to today on client side

            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
                                "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

            function formatNumber(num) {
                if (num === 0) return "0";
                const sign = num > 0 ? "+" : "-";
                return `${sign}${Math.abs(num).toLocaleString()}`;
            }
            
            function updateSummary(year, month) {
                // Calculate Monthly (YYYY-MM)
                let mProfit = 0;
                let mLoss = 0;
                
                // Calculate Yearly (YYYY)
                let yProfit = 0;
                let yLoss = 0;
                
                // Iterate all event keys
                for (const dateKey in eventData) {
                    // dateKey is "YYYY-MM-DD"
                    const parts = dateKey.split("-");
                    const dYear = parseInt(parts[0]);
                    const dMonth = parseInt(parts[1]) - 1; // 0-indexed
                    
                    const entries = eventData[dateKey];
                    
                    // Yearly Accumulation
                    if (dYear === year) {
                        entries.forEach(e => {
                            yProfit += (e.profit || 0);
                            yLoss += (e.loss || 0);
                        });
                        
                        // Monthly Accumulation
                        if (dMonth === month) {
                            entries.forEach(e => {
                                mProfit += (e.profit || 0);
                                mLoss += (e.loss || 0);
                            });
                        }
                    }
                }
                
                const mNet = mProfit - mLoss;
                const mEl = document.getElementById('monthReturn');
                mEl.innerText = formatNumber(mNet);
                mEl.className = 'summary-value ' + (mNet > 0 ? 'profit' : (mNet < 0 ? 'loss' : ''));
                
                const yNet = yProfit - yLoss;
                const yEl = document.getElementById('yearReturn');
                yEl.innerText = formatNumber(yNet);
                yEl.className = 'summary-value ' + (yNet > 0 ? 'profit' : (yNet < 0 ? 'loss' : ''));
            }

            function renderCalendar() {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth(); // 0-11
                
                // Update Header
                const monthName = monthNames[month];
                document.getElementById('monthLabel').innerText = `${year} ${monthName}`;
                
                // Calculate Grid
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0); // Last day of current month
                
                const numDays = lastDay.getDate();
                const startDayOfWeek = firstDay.getDay(); // 0 (Sun) - 6 (Sat)
                
                const grid = document.getElementById('calendarGrid');
                grid.innerHTML = ''; // Clear previous
                
                // Day Headers
                const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                days.forEach(d => {
                    const el = document.createElement('div');
                    el.className = 'day-header';
                    el.innerText = d;
                    grid.appendChild(el);
                });
                
                // Empty cells before start
                for (let i = 0; i < startDayOfWeek; i++) {
                    const el = document.createElement('div');
                    el.className = 'day-cell empty';
                    grid.appendChild(el);
                }
                
                // Days
                const today = new Date();
                const isCurrentMonth = (today.getFullYear() === year && today.getMonth() === month);
                const todayDate = today.getDate();
                
                for (let d = 1; d <= numDays; d++) {
                    const cell = document.createElement('div');
                    cell.className = 'day-cell';
                    
                    // Check matches
                    // construct YYYY-MM-DD string with padding
                    const mStr = String(month + 1).padStart(2, '0');
                    const dStr = String(d).padStart(2, '0');
                    const dateKey = `${year}-${mStr}-${dStr}`;
                    
                    const entries = eventData[dateKey] || [];
                    
                    if (isCurrentMonth && d === todayDate) {
                        cell.classList.add('today');
                    }
                    
                    // Add day number first (top right aligned via CSS)
                    const numSpan = document.createElement('span');
                    numSpan.className = 'day-number';
                    numSpan.innerText = d;
                    cell.appendChild(numSpan);
                    
                    if (entries.length > 0) {
                        cell.classList.add('has-entry');
                        
                        // Create Tooltip
                        let tooltipContent = '';
                        // cell content container
                        const contentDiv = document.createElement('div');
                        contentDiv.className = 'cell-content';
                        
                        entries.forEach(e => {
                            tooltipContent += `<div class="entry-item">${e.display}</div>`;
                            
                            // Add P&L to cell if exists
                            if (e.loss > 0) {
                                const lossEl = document.createElement('div');
                                lossEl.className = 'pl-text loss';
                                lossEl.innerText = `-${e.loss.toLocaleString()}`;
                                contentDiv.appendChild(lossEl);
                            }
                            if (e.profit > 0) {
                                const profitEl = document.createElement('div');
                                profitEl.className = 'pl-text profit';
                                profitEl.innerText = `+${e.profit.toLocaleString()}`;
                                contentDiv.appendChild(profitEl);
                            }
                        });
                        
                        cell.appendChild(contentDiv);
                        
                        const tooltip = document.createElement('div');
                        tooltip.className = 'tooltip';
                        tooltip.innerHTML = tooltipContent;
                        cell.appendChild(tooltip);
                    } else {
                         // Optional: empty tooltip or nothing
                    }
                    
                    grid.appendChild(cell);
                }
                
                // Update Summary
                updateSummary(year, month);
            }

            // Event Listeners
            document.getElementById('prevBtn').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });
            
            document.getElementById('nextBtn').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });
            
            // Initial Render
            renderCalendar();
        </script>
    </body>
    </html>
    